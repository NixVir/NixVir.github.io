backend:
  name: git-gateway
  branch: master

# Media files stored in static/images
media_folder: "static/images"
public_folder: "/images"

# Editorial workflow: draft -> review -> publish
publish_mode: editorial_workflow

collections:
  # -----------------------------------------------
  # Data Insights Blog Posts
  # -----------------------------------------------
  - name: "post"
    label: "Data Insights"
    folder: "content/post"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    filter: { field: "title", pattern: "^(?!Data Insights$)" }
    description: "Blog posts that appear on the Data Insights page at nixvir.com/post/. Click a title below to edit an existing post, or click 'New Data Insights' to create one."
    sortable_fields: ["date", "title"]
    fields:
      - label: "Title"
        name: "title"
        widget: "string"
        hint: "The headline of your post. Keep it concise and descriptive."

      - label: "Author"
        name: "author"
        widget: "string"
        default: "Nate Fristoe"

      - label: "Publish Date"
        name: "date"
        widget: "datetime"
        format: "YYYY-MM-DD"
        date_format: "YYYY-MM-DD"
        time_format: false
        hint: "The date shown on the post. Click 'Now' to use today's date."

      - label: "URL Slug"
        name: "slug"
        widget: "string"
        required: false
        hint: "Controls the URL path for this post (e.g. 'winter-outlook-2026' becomes nixvir.com/post/2026-01-15-winter-outlook-2026). Leave blank to auto-generate from the title."

      - label: "Categories"
        name: "categories"
        widget: "list"
        default: ["ski-industry"]
        hint: "Topic areas for organizing posts. Most posts need just one. Delete empty rows with the X button. Common categories: ski-industry, economics, climate, technology."
        field: { label: "Category", name: "category", widget: "string" }
        minimize_collapsed: true

      - label: "Tags"
        name: "tags"
        widget: "list"
        required: false
        hint: "Optional keywords for finer-grained filtering (e.g. 'snow-cover', 'consumer-confidence'). Leave empty if not needed."
        field: { label: "Tag", name: "tag", widget: "string" }
        minimize_collapsed: true

      - label: "Description"
        name: "description"
        widget: "text"
        required: false
        hint: "A 1-2 sentence summary used for SEO and social media previews. If left blank, Hugo uses the first few sentences of the post."

      - label: "Featured Image"
        name: "featured_image"
        widget: "image"
        required: false
        hint: "Banner image displayed at the top of the post. Upload here or choose from existing images."

      - label: "Hide Header Text"
        name: "omit_header_text"
        widget: "hidden"
        default: true

      - label: "Body"
        name: "body"
        widget: "markdown"
        hint: "The main content of your post. Use the toolbar above for formatting, links, and images."

  # -----------------------------------------------
  # Manual News Stories (injected into Ski News feed)
  # -----------------------------------------------
  - name: "manual-news"
    label: "Ski News — Manual Stories"
    description: "Manually add articles, podcasts, or videos to the Ski Industry News feed. These entries are merged with the automated RSS feed and appear on the Ski News page. Fill in the URL, title, and category at minimum."
    files:
      - name: "manual-news-file"
        label: "Manual News Entries"
        file: "static/data/ski-news-manual.json"
        fields:
          - label: "Stories"
            name: "stories"
            widget: "list"
            hint: "Each entry becomes a story on the Ski News page. Click ▶ to expand and edit a story, ✕ to delete it, or 'Add stories +' to create a new one. To hide a story without deleting it, expand it and uncheck 'Active'."
            summary: "{{fields.title}}  ·  {{fields.category}}  ·  {{fields.pub_date}}"
            minimize_collapsed: true
            collapsed: true
            fields:
              - label: "Story Title"
                name: "title"
                widget: "string"
                hint: "The headline as it will appear in the news feed."

              - label: "Story URL"
                name: "url"
                widget: "string"
                hint: "Full URL to the article, podcast episode, or video (e.g. https://example.com/article)."

              - label: "Source Name"
                name: "source"
                widget: "string"
                hint: "Publication or channel name (e.g. 'Storm Skiing Podcast', 'New York Times', 'Powder Magazine')."

              - label: "Category"
                name: "category"
                widget: "select"
                options:
                  - { label: "Business & Investment", value: "business-investment" }
                  - { label: "Resort Operations", value: "resort-operations" }
                  - { label: "Weather & Snow", value: "weather-snow" }
                  - { label: "Transportation", value: "transportation" }
                  - { label: "Winter Sports", value: "winter-sports" }
                  - { label: "Hospitality", value: "hospitality" }
                  - { label: "Canada", value: "canada" }
                  - { label: "International", value: "international" }
                  - { label: "Ski History", value: "ski-history" }
                  - { label: "Safety & Incidents", value: "safety-incidents" }
                  - { label: "Podcast / Video", value: "media" }
                hint: "Choose the most relevant category. Use 'Podcast / Video' for audio/video content."

              - label: "Content Type"
                name: "content_type"
                widget: "select"
                default: "article"
                options:
                  - { label: "Article", value: "article" }
                  - { label: "Podcast", value: "podcast" }
                  - { label: "Video", value: "video" }
                hint: "Select the type of content. Podcasts and videos display with a special icon."

              - label: "Description"
                name: "description"
                widget: "text"
                required: false
                hint: "A short summary or excerpt (1-2 sentences). Shown below the headline in the news feed."

              - label: "Publication Date"
                name: "pub_date"
                widget: "datetime"
                format: "YYYY-MM-DD"
                date_format: "YYYY-MM-DD"
                time_format: false
                hint: "When the story was originally published. Click 'Now' for today."

              - label: "Pin to Top"
                name: "pinned"
                widget: "boolean"
                default: false
                required: false
                hint: "Pinned stories always appear at the top of the news feed, above automated articles."

              - label: "Pin Until"
                name: "pin_until"
                widget: "datetime"
                format: "YYYY-MM-DD"
                date_format: "YYYY-MM-DD"
                time_format: false
                required: false
                hint: "Optional expiration date for pinning. After this date the story stays in the feed but is no longer forced to the top. Leave blank to pin indefinitely."

              - label: "Active"
                name: "active"
                widget: "boolean"
                default: true
                required: false
                hint: "Uncheck to hide this story from the feed without deleting it."
